(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74f58a28"],{"98af":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"expense-management"},[t("el-dialog",{attrs:{title:"add"===e.dialogForm.type?"新增报销":"编辑报销",visible:e.dialogForm.isShow},on:{"update:visible":function(t){return e.$set(e.dialogForm,"isShow",t)}}},[t("el-form",{ref:"dialogForm",attrs:{"label-width":"120px",model:e.dialogForm.formData,rules:e.dialogForm.rules}},[t("el-form-item",{attrs:{label:"报销人",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入报销人姓名"},model:{value:e.dialogForm.formData.name,callback:function(t){e.$set(e.dialogForm.formData,"name",t)},expression:"dialogForm.formData.name"}})],1),t("el-form-item",{attrs:{label:"报销金额",prop:"amount"}},[t("el-input-number",{attrs:{min:0,placeholder:"请输入报销金额"},model:{value:e.dialogForm.formData.amount,callback:function(t){e.$set(e.dialogForm.formData,"amount",t)},expression:"dialogForm.formData.amount"}})],1),t("el-form-item",{attrs:{label:"报销类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择报销类型"},model:{value:e.dialogForm.formData.type,callback:function(t){e.$set(e.dialogForm.formData,"type",t)},expression:"dialogForm.formData.type"}},[t("el-option",{attrs:{label:"交通",value:"交通"}}),t("el-option",{attrs:{label:"住宿",value:"住宿"}}),t("el-option",{attrs:{label:"餐饮",value:"餐饮"}}),t("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),t("el-form-item",{attrs:{label:"报销日期",prop:"date"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.dialogForm.formData.date,callback:function(t){e.$set(e.dialogForm.formData,"date",t)},expression:"dialogForm.formData.date"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"description"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.dialogForm.formData.description,callback:function(t){e.$set(e.dialogForm.formData,"description",t)},expression:"dialogForm.formData.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogForm.isShow=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1),t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增报销")]),t("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",title:"你确定删除吗？"},on:{confirm:e.handleDeleteBatch}},[t("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v(" 批量删除 ")])],1)],1),t("div",{staticClass:"search-form"},[t("el-form",{attrs:{"label-width":"auto",model:e.searchForm.formData,inline:!0}},[t("el-form-item",{attrs:{label:"报销人",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入报销人姓名","prefix-icon":"el-icon-search"},model:{value:e.searchForm.formData.name,callback:function(t){e.$set(e.searchForm.formData,"name","string"===typeof t?t.trim():t)},expression:"searchForm.formData.name"}})],1),t("el-form-item",{attrs:{label:"报销日期",prop:"date"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.searchForm.formData.date,callback:function(t){e.$set(e.searchForm.formData,"date",t)},expression:"searchForm.formData.date"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"common-table"},[t("el-table",{attrs:{data:e.table.tableData,border:"",stripe:"",height:"85%","row-key":"id","header-cell-style":{background:"#eef1f6",color:"#606266",textAlign:"center",fontWeight:"bold",borderWidth:"3px"}},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"报销单ID",width:"120"}}),t("el-table-column",{attrs:{prop:"name",label:"报销人",width:"120"}}),t("el-table-column",{attrs:{prop:"date",label:"报销日期",width:"150"}}),t("el-table-column",{attrs:{prop:"type",label:"报销类型",width:"120"}}),t("el-table-column",{attrs:{prop:"amount",label:"报销金额",width:"120"}}),t("el-table-column",{attrs:{prop:"description",label:"报销说明",width:"200"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),t("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"200"}}),t("el-table-column",{attrs:{prop:"status",label:"报销状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[0===a.row.status?t("span",[e._v("未审批")]):e._e(),1===a.row.status?t("span",[e._v("审批通过")]):e._e(),-1===a.row.status?t("span",[e._v("审批失败")]):e._e()])]}}])})],1)],1),t("el-pagination",{staticClass:"pagination",attrs:{layout:"total, sizes, prev, pager, next",total:e.table.pageConfig.total,"page-size":e.table.pageConfig.size,"current-page":e.table.pageConfig.current,"page-sizes":[5,10,15,20]},on:{"update:currentPage":function(t){return e.$set(e.table.pageConfig,"current",t)},"update:current-page":function(t){return e.$set(e.table.pageConfig,"current",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],l=a("e562"),s={data(){return{dialogForm:{type:"add",isShow:!1,formData:{},rules:{name:[{required:!0,message:"请输入报销人姓名",trigger:"blur"}],amount:[{required:!0,message:"请输入报销金额",trigger:"blur"},{type:"number",message:"请输入有效的数字",trigger:"blur"}],type:[{required:!0,message:"请选择报销类型",trigger:"blur"}],date:[{required:!0,message:"请选择报销日期",trigger:"blur"}]}},searchForm:{formData:{}},table:{tableData:[],pageConfig:{total:0,current:1,size:10},ids:[]},loadingFlag:!1}},methods:{approve(e){e.status=1,Object(l["d"])(e).then(e=>{200===e.code?(this.$message.success("审批通过"),this.loading()):this.$message.error("审批失败")})},reject(e){e.status=3,Object(l["d"])(e).then(e=>{200===e.code?(this.$message.success("驳回成功"),this.loading()):this.$message.error("驳回失败")})},loading(){Object(l["f"])({current:this.table.pageConfig.current,size:this.table.pageConfig.size,name:this.searchForm.formData.name,deptId:this.searchForm.formData.deptId}).then(e=>{this.table.tableData=e.data,this.table.pageConfig.total=e.total})},handleAdd(){this.dialogForm.isShow=!0,this.dialogForm.type="add",this.dialogForm.formData={}},handleEdit(e){this.dialogForm.isShow=!0,this.dialogForm.type="edit",this.dialogForm.formData={...e}},confirm(){this.$refs.dialogForm.validate(e=>{e&&(this.loadingFlag=!0,"add"===this.dialogForm.type?Object(l["a"])(this.dialogForm.formData).then(e=>{this.loadingFlag=!1,200===e.code?(this.$message.success("新增成功!"),this.dialogForm.isShow=!1,this.loading()):this.$message.error("新增失败!")}):Object(l["d"])(this.dialogForm.formData).then(e=>{this.loadingFlag=!1,200===e.code?(this.$message.success("修改成功!"),this.dialogForm.isShow=!1,this.loading()):this.$message.error("修改失败!")}))})},handleSelectionChange(e){console.log("Selected rows:",e),this.ids=e.map(e=>e.id),console.log("Selected ids:",this.ids)},handleDeleteBatch(){Object(l["b"])(this.ids).then(e=>{200===e.code?(this.$message.success("批量删除成功！"),this.loading()):this.$message.error("批量删除失败！")})},handleDelete(e){this.loadingFlag=!0,Object(l["c"])(e).then(e=>{this.loadingFlag=!1,200===e.code?(this.$message.success("删除成功!"),this.loading()):this.$message.error("删除失败!")})},search(){this.loading()},reset(){this.searchForm.formData={},this.loading()},handleSizeChange(e){this.table.pageConfig.size=e,this.loading()},handleCurrentChange(e){this.table.pageConfig.current=e,this.loading()},exportData(){window.open(Object(l["e"])())}},mounted(){this.loading(),console.log("Table data:",this.table.tableData)}},i=s,n=(a("c66f"),a("2877")),d=Object(n["a"])(i,o,r,!1,null,"458c7b04",null);t["default"]=d.exports},c66f:function(e,t,a){"use strict";a("e2c3")},e2c3:function(e,t,a){},e562:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return h})),a.d(t,"e",(function(){return p}));var o=a("bc3a"),r=a.n(o),l=a("b775");const s="/dev/expenses",i="/expenses",n=e=>r.a.get(s,{params:e}).then(e=>e.data).catch(e=>{throw console.error("获取报销单列表失败",e),e}),d=e=>r.a.post(s,e).then(e=>e.data).catch(e=>{throw console.error("新增报销单失败",e),e}),c=e=>r.a.put(s,e).then(e=>e.data).catch(e=>{throw console.error("编辑报销单失败",e),e}),m=e=>r.a.delete(`${s}/${e}`).then(e=>e.data).catch(e=>{throw console.error("删除报销单失败",e),e}),h=e=>Object(l["a"])({url:i+"/batch/"+e,method:"delete"}),p=()=>"http://localhost:9271"+i+"/export"}}]);
//# sourceMappingURL=chunk-74f58a28.26a6ae09.js.map