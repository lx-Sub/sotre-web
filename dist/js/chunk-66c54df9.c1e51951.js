(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66c54df9"],{"33c5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"manage"},[e("el-dialog",{attrs:{title:"add"===t.dialogForm.type?"新增用户":"更新用户",visible:t.dialogForm.isShow},on:{"update:visible":function(e){return t.$set(t.dialogForm,"isShow",e)}}},[e("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.dialogForm.formData}},[e("el-form-item",{staticStyle:{"margin-bottom":"4px"},attrs:{"label-width":"40px"}},[e("el-form-item",{staticStyle:{display:"inline-block",width:"300px"},attrs:{label:"姓名",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.dialogForm.formData.name,callback:function(e){t.$set(t.dialogForm.formData,"name","string"===typeof e?e.trim():e)},expression:"dialogForm.formData.name"}})],1),e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"生日",prop:"birthday"}},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择生日  "},model:{value:t.dialogForm.formData.birthday,callback:function(e){t.$set(t.dialogForm.formData,"birthday",e)},expression:"dialogForm.formData.birthday"}})],1)],1),e("el-form-item",{staticStyle:{"margin-bottom":"4px"},attrs:{"label-width":"40px"}},[e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"部门",prop:"deptId"}},[e("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.dialogForm.formData.deptId,callback:function(e){t.$set(t.dialogForm.formData,"deptId",e)},expression:"dialogForm.formData.deptId"}},t._l(t.dialogForm.deptList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),1)],1),e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"性别",prop:"gender"}},[e("el-select",{attrs:{placeholder:"请选择员工性别"},model:{value:t.dialogForm.formData.gender,callback:function(e){t.$set(t.dialogForm.formData,"gender",e)},expression:"dialogForm.formData.gender"}},[e("el-option",{attrs:{value:"男"}}),e("el-option",{attrs:{value:"女"}})],1)],1)],1),e("el-form-item",{staticStyle:{width:"340px"},attrs:{label:"电话","label-width":"140px",prop:"phone"}},[e("el-input",{attrs:{placeholder:"请输入电话"},model:{value:t.dialogForm.formData.phone,callback:function(e){t.$set(t.dialogForm.formData,"phone","string"===typeof e?e.trim():e)},expression:"dialogForm.formData.phone"}})],1),e("el-form-item",{staticStyle:{width:"450px"},attrs:{label:"地址","label-width":"140px",prop:"address"}},[e("el-input",{attrs:{placeholder:"请输入地址"},model:{value:t.dialogForm.formData.address,callback:function(e){t.$set(t.dialogForm.formData,"address","string"===typeof e?e.trim():e)},expression:"dialogForm.formData.address"}})],1),e("el-form-item",{staticStyle:{width:"450px"},attrs:{label:"备注","label-width":"140px",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:2,maxRows:4},maxlength:"100","show-word-limit":""},model:{value:t.dialogForm.formData.remark,callback:function(e){t.$set(t.dialogForm.formData,"remark","string"===typeof e?e.trim():e)},expression:"dialogForm.formData.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogForm.isShow=!1}}},[t._v(" 取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(" 确定")])],1)],1),e("el-dialog",{attrs:{title:"角色分配",visible:t.roleDialog.isShow},on:{"update:visible":function(e){return t.$set(t.roleDialog,"isShow",e)}}},[e("el-checkbox-group",{model:{value:t.roleDialog.checkedData,callback:function(e){t.$set(t.roleDialog,"checkedData",e)},expression:"roleDialog.checkedData"}},t._l(t.roleDialog.roleData,(function(a,o){return e("el-checkbox",{key:o,staticStyle:{margin:"10px"},attrs:{label:a.id,border:""}},[t._v(t._s(a.name)+" ")])})),1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.roleDialog.isShow=!1}}},[t._v(" 取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSetRole}},[t._v(" 确定")])],1)],1),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:t.importApi,headers:t.headers,accept:"xlsx","show-file-list":!1,"on-success":t.handleImportSuccess,multiple:!1}},[e("el-button",{attrs:{type:"success"}},[t._v(" 导入 ")])],1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:t.exportData}},[t._v(" 导出 ")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(" 新增 ")]),e("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",title:"你确定删除吗？"},on:{confirm:t.handleDeleteBatch}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v(" 批量删除 ")])],1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.search}},[t._v(" 搜索")]),e("el-button",{attrs:{type:"danger"},on:{click:t.reset}},[t._v(" 重置")])],1),e("div",{staticClass:"manage-header"},[e("el-form",{attrs:{"label-width":"auto",model:t.searchForm.formData,inline:!0}},[e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入姓名","prefix-icon":"el-icon-search"},model:{value:t.searchForm.formData.name,callback:function(e){t.$set(t.searchForm.formData,"name","string"===typeof e?e.trim():e)},expression:"searchForm.formData.name"}})],1),e("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择起始日期"},model:{value:t.searchForm.formData.birthday,callback:function(e){t.$set(t.searchForm.formData,"birthday",e)},expression:"searchForm.formData.birthday"}})],1),e("el-form-item",{attrs:{label:"部门",prop:"deptId"}},[e("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.searchForm.formData.deptId,callback:function(e){t.$set(t.searchForm.formData,"deptId",e)},expression:"searchForm.formData.deptId"}},t._l(t.searchForm.deptList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),1)],1),e("el-form-item",{attrs:{label:"状态",prop:"status"}},[e("el-select",{attrs:{placeholder:"请选择员工状态"},model:{value:t.searchForm.formData.status,callback:function(e){t.$set(t.searchForm.formData,"status",e)},expression:"searchForm.formData.status"}},[e("el-option",{attrs:{label:"正常",value:"1"}}),e("el-option",{attrs:{label:"异常",value:"0"}})],1)],1)],1)],1),e("div",{staticClass:"common-table"},[e("el-table",{attrs:{data:t.table.tableData,height:"85%",border:"",stripe:"","row-key":"id","header-cell-style":{background:"#eef1f6",color:"#606266",textAlign:"center",fontWeight:"bold",borderWidth:"3px"}},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e("el-table-column",{attrs:{prop:"id",label:"id",width:"50",align:"center"}}),e("el-table-column",{attrs:{prop:"code",label:"工号","min-width":"80",align:"center"}}),e("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"80",align:"center"}}),e("el-table-column",{attrs:{prop:"age",label:"年龄","min-width":"50",align:"center"}}),e("el-table-column",{attrs:{prop:"deptName",label:"部门","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"gender",label:"性别","min-width":"50",align:"center"}}),e("el-table-column",{attrs:{prop:"phone",label:"电话","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"birthday",label:"生日","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{label:"状态","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"正常","inactive-text":"异常","active-value":1,"inactive-value":0},on:{change:function(e){return t.handleStatusChange(a.row)}},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope.row.status"}})]}}])}),e("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"200",align:"center"}}),e("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200",align:"center"}}),e("el-table-column",{attrs:{label:"操作",width:"420",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v(" 编辑")]),e("el-popconfirm",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",title:"你确定删除吗？"},on:{confirm:function(e){return t.handleDelete(a.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v(" 删除")])],1),e("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.selectRole(a.row.id)}}},[t._v(" 分配角色 ")])]}}])})],1),e("el-pagination",{staticClass:"pager",attrs:{layout:"total,sizes,prev,pager,next,jumper","page-size":t.table.pageConfig.size?t.table.pageConfig.size:10,"page-sizes":[5,10,15,20],total:t.table.pageConfig.total,"current-page":t.table.pageConfig.current},on:{"update:currentPage":function(e){return t.$set(t.table.pageConfig,"current",e)},"update:current-page":function(e){return t.$set(t.table.pageConfig,"current",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},r=[],l=(a("14d9"),a("b4ea")),i=a("cc5e"),n=a("fe05"),s=a("2f62"),c={name:"Staff",data(){return{dialogForm:{type:"add",isShow:!1,deptList:[],formData:{}},searchForm:{deptList:[],formData:{}},roleDialog:{isShow:!1,roleData:[],checkedData:[]},table:{tableData:[],pageConfig:{total:10,current:1,size:10}},ids:[],staffId:0,subDeptList:[]}},computed:{...Object(s["b"])("token",["token"]),headers(){return{token:this.token}},importApi(){return Object(l["g"])()}},methods:{getDept(){Object(n["e"])().then(t=>{const e=[];t.data.forEach(t=>{t.children.length>0&&(t.disabled=!0,e.push(t),t.children.forEach(t=>{e.push(t)}))}),this.dialogForm.deptList=e})},handleAdd(){this.dialogForm.isShow=!0,this.dialogForm.type="add",this.dialogForm.formData={},this.getDept()},handleDelete(t){Object(l["d"])(t).then(t=>{200===t.code?(this.$message.success("删除成功！"),this.loading()):this.$message.error("删除失败！")})},handleDeleteBatch(){Object(l["c"])(this.ids).then(t=>{200===t.code?(this.$message.success("批量删除成功！"),this.loading()):this.$message.error("批量删除失败！")})},handleEdit(t){this.dialogForm.isShow=!0,this.dialogForm.type="edit",this.dialogForm.formData=t,this.getDept()},confirm(){"add"===this.dialogForm.type?Object(l["a"])(this.dialogForm.formData).then(t=>{200===t.code?(this.$message.success("添加成功！"),this.dialogForm.isShow=!1,this.loading()):this.$message.error("添加失败！")}):Object(l["e"])(this.dialogForm.formData).then(t=>{200===t.code?(this.$message.success("修改成功！"),this.dialogForm.isShow=!1,this.loading()):this.$message.error("修改失败！")})},search(){this.loading()},reset(){this.searchForm.formData={},this.loading()},handleSizeChange(t){this.table.pageConfig.size=t,this.loading()},handleCurrentChange(t){this.table.pageConfig.current=t,this.loading()},handleSelectionChange(t){this.ids=t.map(t=>t.id)},handleStatusChange(t){Object(l["e"])(t)},loading(){Object(n["e"])().then(t=>{const e=[];t.data.forEach(t=>{t.children.length>0&&(t.disabled=!0,e.push(t),t.children.forEach(t=>{e.push(t)}))}),this.searchForm.deptList=e}),Object(l["i"])({current:this.table.pageConfig.current,size:this.table.pageConfig.size},this.searchForm.formData).then(t=>{200===t.code?(this.table.tableData=t.data.list,console.log(this.table.tableData),this.table.pageConfig.total=t.data.total):this.$message.error(t.message)})},exportData(){window.open(Object(l["f"])())},handleImportSuccess(t){200===t.code?(this.$message.success("数据导入成功！"),this.loading()):this.$message.error("数据导入失败！")},selectRole(t){this.staffId=t,this.roleDialog.isShow=!0,Object(i["e"])().then(t=>{200===t.code?this.roleDialog.roleData=t.data:this.$message.error("获取角色数据失败！")}),Object(l["j"])(this.staffId).then(t=>{200===t.code?this.roleDialog.checkedData=t.data.map(t=>t.roleId):this.$message.error("获取数据失败！")})},handleSetRole(){Object(l["k"])(this.staffId,this.roleDialog.checkedData).then(t=>{200===t.code?(this.roleDialog.isShow=!1,this.$message.success("角色分配成功！")):this.$message.error("角色分配失败！")})}},created(){this.loading()}},d=c,m=a("2877"),h=Object(m["a"])(d,o,r,!1,null,null,null);e["default"]=h.exports},b4ea:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"k",(function(){return h})),a.d(e,"j",(function(){return u})),a.d(e,"h",(function(){return p})),a.d(e,"b",(function(){return f})),a.d(e,"l",(function(){return g}));var o=a("b775");const r="/staff",l=t=>Object(o["a"])({url:r,method:"post",data:t}),i=t=>Object(o["a"])({url:r+"/"+t,method:"delete"}),n=t=>Object(o["a"])({url:r+"/batch/"+t,method:"delete"}),s=t=>Object(o["a"])({url:r,method:"put",data:t}),c=(t,e)=>Object(o["a"])({url:r+"/page",method:"post",params:t,data:e}),d=()=>"http://localhost:9271"+r+"/import",m=()=>"http://localhost:9271"+r+"/export",h=(t,e)=>Object(o["a"])({url:r+"/role/"+t,method:"post",data:e}),u=t=>Object(o["a"])({url:r+"/role/"+t}),p=t=>Object(o["a"])({url:r+"/info/"+t}),f=(t,e)=>Object(o["a"])({url:r+"/check/"+t+"/"+e}),g=t=>Object(o["a"])({url:r+"/pwd",method:"put",data:t})},cc5e:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return s})),a.d(e,"h",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"g",(function(){return m})),a.d(e,"f",(function(){return h})),a.d(e,"j",(function(){return u})),a.d(e,"i",(function(){return p}));var o=a("b775");const r="/role",l=t=>Object(o["a"])({url:r,method:"post",data:t}),i=t=>Object(o["a"])({url:r+"/"+t,method:"delete"}),n=t=>Object(o["a"])({url:r+"/batch/"+t,method:"delete"}),s=t=>Object(o["a"])({url:r,method:"put",data:t}),c=t=>Object(o["a"])({url:r,method:"get",params:t}),d=()=>Object(o["a"])({url:r+"/all"}),m=()=>"http://localhost:9271"+r+"/import",h=()=>"http://localhost:9271"+r+"/export",u=(t,e)=>Object(o["a"])({url:r+"/menu/"+t,method:"post",data:e}),p=t=>Object(o["a"])({url:r+"/menu/"+t})},fe05:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return s})),a.d(e,"h",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"g",(function(){return m})),a.d(e,"f",(function(){return h}));var o=a("b775");const r="/dept",l=t=>Object(o["a"])({url:r,method:"post",data:t}),i=t=>Object(o["a"])({url:r+"/"+t,method:"delete"}),n=t=>Object(o["a"])({url:r+"/batch/"+t,method:"delete"}),s=t=>Object(o["a"])({url:r,method:"put",data:t}),c=t=>Object(o["a"])({url:r,method:"get",params:t}),d=()=>Object(o["a"])({url:r+"/all"}),m=()=>"http://localhost:9271"+r+"/import",h=()=>"http://localhost:9271"+r+"/export"}}]);
//# sourceMappingURL=chunk-66c54df9.c1e51951.js.map