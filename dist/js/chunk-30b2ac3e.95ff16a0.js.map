{"version":3,"sources":["webpack:///./src/views/file/send/index.vue?583e","webpack:///./src/views/file/send/index.vue","webpack:///./src/api/materialApproval.js","webpack:///src/views/file/send/index.vue","webpack:///./src/views/file/send/index.vue?0915","webpack:///./src/views/file/send/index.vue?ddf9"],"names":["render","_vm","this","_c","_self","staticClass","attrs","dialogForm","type","isShow","on","$event","$set","ref","formData","rules","model","value","approver","callback","$$v","expression","materialName","quantity","applyDate","description","slot","_v","confirm","staticStyle","handleAdd","handleDeleteBatch","searchForm","trim","search","reset","table","tableData","background","color","textAlign","fontWeight","borderWidth","handleSelectionChange","scopedSlots","_u","key","fn","scope","row","status","_e","approve","reject","pageConfig","total","size","current","handleSizeChange","handleCurrentChange","staticRenderFns","API_BASE_URL","url","getList","params","axios","get","then","response","data","catch","error","console","add","expense","post","edit","put","deleteBatch","ids","request","method","required","message","trigger","loadingFlag","methods","code","$message","success","loading","$refs","validate","valid","list","log","map","item","id","mounted","component"],"mappings":"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","file":"js/chunk-30b2ac3e.95ff16a0.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=13f4ae76&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"material-approval\"},[_c('el-dialog',{attrs:{\"title\":_vm.dialogForm.type === 'add' ? '新增材料审批' : '编辑材料审批',\"visible\":_vm.dialogForm.isShow},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialogForm, \"isShow\", $event)}}},[_c('el-form',{ref:\"dialogForm\",attrs:{\"label-width\":\"120px\",\"model\":_vm.dialogForm.formData,\"rules\":_vm.dialogForm.rules}},[_c('el-form-item',{attrs:{\"label\":\"审批人\",\"prop\":\"approver\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入审批人姓名\"},model:{value:(_vm.dialogForm.formData.approver),callback:function ($$v) {_vm.$set(_vm.dialogForm.formData, \"approver\", $$v)},expression:\"dialogForm.formData.approver\"}})],1),_c('el-form-item',{attrs:{\"label\":\"材料名称\",\"prop\":\"materialName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入材料名称\"},model:{value:(_vm.dialogForm.formData.materialName),callback:function ($$v) {_vm.$set(_vm.dialogForm.formData, \"materialName\", $$v)},expression:\"dialogForm.formData.materialName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"数量\",\"prop\":\"quantity\"}},[_c('el-input-number',{attrs:{\"min\":1,\"placeholder\":\"请输入材料数量\"},model:{value:(_vm.dialogForm.formData.quantity),callback:function ($$v) {_vm.$set(_vm.dialogForm.formData, \"quantity\", $$v)},expression:\"dialogForm.formData.quantity\"}})],1),_c('el-form-item',{attrs:{\"label\":\"申请日期\",\"prop\":\"applyDate\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.dialogForm.formData.applyDate),callback:function ($$v) {_vm.$set(_vm.dialogForm.formData, \"applyDate\", $$v)},expression:\"dialogForm.formData.applyDate\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入备注\"},model:{value:(_vm.dialogForm.formData.description),callback:function ($$v) {_vm.$set(_vm.dialogForm.formData, \"description\", $$v)},expression:\"dialogForm.formData.description\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogForm.isShow = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确定\")])],1)],1),_c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新增材料审批\")]),_c('el-popconfirm',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"confirm-button-text\":\"确定\",\"cancel-button-text\":\"我再想想\",\"title\":\"你确定删除吗？\"},on:{\"confirm\":_vm.handleDeleteBatch}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\" 批量删除 \")])],1)],1),_c('div',{staticClass:\"search-form\"},[_c('el-form',{attrs:{\"label-width\":\"auto\",\"model\":_vm.searchForm.formData,\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"审批人\",\"prop\":\"approver\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入审批人姓名\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.searchForm.formData.approver),callback:function ($$v) {_vm.$set(_vm.searchForm.formData, \"approver\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchForm.formData.approver\"}})],1),_c('el-form-item',{attrs:{\"label\":\"申请日期\",\"prop\":\"applyDate\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.searchForm.formData.applyDate),callback:function ($$v) {_vm.$set(_vm.searchForm.formData, \"applyDate\", $$v)},expression:\"searchForm.formData.applyDate\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")]),_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"common-table\"},[_c('el-table',{attrs:{\"data\":_vm.table.tableData,\"border\":\"\",\"stripe\":\"\",\"height\":\"85%\",\"row-key\":\"id\",\"header-cell-style\":{\n        background: '#eef1f6', color: '#606266',\n        textAlign: 'center', fontWeight: 'bold', borderWidth: '3px'\n      }},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"审批单ID\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"materialName\",\"label\":\"材料名称\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"quantity\",\"label\":\"数量\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"applyDate\",\"label\":\"申请日期\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"approver\",\"label\":\"审批人\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"备注\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"updateTime\",\"label\":\"修改时间\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"审批状态\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[(scope.row.status === 0)?_c('span',[_vm._v(\"未审批\")]):_vm._e(),(scope.row.status === 1)?_c('span',[_vm._v(\"审批通过\")]):_vm._e(),(scope.row.status === -1)?_c('span',[_vm._v(\"审批失败\")]):_vm._e()])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"500\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":scope.row.status !== 0},on:{\"click\":function($event){return _vm.approve(scope.row)}}},[_vm._v(\"同意\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"disabled\":scope.row.status !== 0},on:{\"click\":function($event){return _vm.reject(scope.row)}}},[_vm._v(\"驳回\")])]}}])})],1)],1),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"layout\":\"total, sizes, prev, pager, next\",\"total\":_vm.table.pageConfig.total,\"page-size\":_vm.table.pageConfig.size,\"current-page\":_vm.table.pageConfig.current,\"page-sizes\":[5, 10, 15, 20]},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.table.pageConfig, \"current\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.table.pageConfig, \"current\", $event)},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios';\r\nimport request from '@/utils/request'; \r\nconst API_BASE_URL = '/dev/expenses';\r\nconst url = '/expenses'\r\nexport const getList = (params) => {\r\n  return axios.get(API_BASE_URL, { params })\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('获取报销单列表失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const add = (expense) => {\r\n  return axios.post(API_BASE_URL, expense)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('新增报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const edit = (expense) => {\r\n  return axios.put(API_BASE_URL, expense)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('编辑报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const deleteOne = (id) => {\r\n  return axios.delete(`${API_BASE_URL}/${id}`)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('删除报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const deleteBatch = (ids) => {\r\n    return request({\r\n      url: url + '/batch/' + ids,\r\n      method: 'delete'\r\n    })\r\n  }\r\n\r\nexport const exportData = (params) => {\r\n  return axios.get(`${API_BASE_URL}/export/${params.month}`, {\r\n    responseType: 'blob'\r\n  }).then(response => response.data)\r\n    .catch(error => {\r\n      console.error('导出报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const imp = (file) => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  return axios.post(`${API_BASE_URL}/import`, formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    }\r\n  }).then(response => response.data)\r\n    .catch(error => {\r\n      console.error('导入报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const findByEmployeeId = (id) => {\r\n  return axios.get(`${API_BASE_URL}/employee/${id}`)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('根据员工ID查询报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const findByEmployeeIdAndDate = (id, date) => {\r\n  return axios.get(`${API_BASE_URL}/employee/${id}/${date}`)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('根据员工ID和日期查询报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n\r\nexport const findAll = () => {\r\n  return axios.get(`${API_BASE_URL}/all`)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.error('获取所有报销单失败', error);\r\n      throw error;\r\n    });\r\n};\r\n// api/expense.js\r\n\r\n\r\n  \r\n  // 提交报销申请\r\n  // 数据导出\r\n  export const getExportApi = () => {\r\n    return 'http://localhost:' + process.env.VUE_APP_PORT + url + '/export'\r\n  }\r\n  ","<template>\r\n    <div class=\"material-approval\">\r\n      <!-- 新增/编辑弹框 -->\r\n      <el-dialog :title=\"dialogForm.type === 'add' ? '新增材料审批' : '编辑材料审批'\" :visible.sync=\"dialogForm.isShow\">\r\n        <el-form ref=\"dialogForm\" label-width=\"120px\" :model=\"dialogForm.formData\" :rules=\"dialogForm.rules\">\r\n          <el-form-item label=\"审批人\" prop=\"approver\">\r\n            <el-input v-model=\"dialogForm.formData.approver\" placeholder=\"请输入审批人姓名\" />\r\n          </el-form-item>\r\n  \r\n          <el-form-item label=\"材料名称\" prop=\"materialName\">\r\n            <el-input v-model=\"dialogForm.formData.materialName\" placeholder=\"请输入材料名称\" />\r\n          </el-form-item>\r\n  \r\n          <el-form-item label=\"数量\" prop=\"quantity\">\r\n            <el-input-number v-model=\"dialogForm.formData.quantity\" :min=\"1\" placeholder=\"请输入材料数量\" />\r\n          </el-form-item>\r\n  \r\n          <el-form-item label=\"申请日期\" prop=\"applyDate\">\r\n            <el-date-picker v-model=\"dialogForm.formData.applyDate\" type=\"date\" placeholder=\"选择日期\" />\r\n          </el-form-item>\r\n  \r\n          <el-form-item label=\"备注\" prop=\"description\">\r\n            <el-input type=\"textarea\" v-model=\"dialogForm.formData.description\" placeholder=\"请输入备注\" />\r\n          </el-form-item>\r\n        </el-form>\r\n  \r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogForm.isShow = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n  \r\n      <!-- 操作按钮 -->\r\n      <div style=\"margin-bottom: 10px\">\r\n        <el-button type=\"primary\" @click=\"handleAdd\">新增材料审批</el-button>\r\n        <el-popconfirm style=\"margin-left: 10px\" confirm-button-text='确定' cancel-button-text='我再想想' title=\"你确定删除吗？\"\r\n          @confirm=\"handleDeleteBatch\">\r\n          <el-button type=\"danger\" slot=\"reference\"> 批量删除 </el-button>\r\n        </el-popconfirm>\r\n      </div>\r\n  \r\n      <!-- 搜索框 -->\r\n      <div class=\"search-form\">\r\n        <el-form label-width=\"auto\" :model=\"searchForm.formData\" :inline=\"true\">\r\n          <el-form-item label=\"审批人\" prop=\"approver\">\r\n            <el-input v-model.trim=\"searchForm.formData.approver\" placeholder=\"请输入审批人姓名\" prefix-icon=\"el-icon-search\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"申请日期\" prop=\"applyDate\">\r\n            <el-date-picker v-model=\"searchForm.formData.applyDate\" type=\"date\" placeholder=\"选择日期\" />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n            <el-button @click=\"reset\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n  \r\n      <!-- 审批记录表格 -->\r\n      <div class=\"common-table\">\r\n        <el-table :data=\"table.tableData\" border stripe height=\"85%\" row-key=\"id\" \r\n          @selection-change=\"handleSelectionChange\"\r\n          :header-cell-style=\"{\r\n            background: '#eef1f6', color: '#606266',\r\n            textAlign: 'center', fontWeight: 'bold', borderWidth: '3px'\r\n          }\">\r\n          <el-table-column type=\"selection\" width=\"55\" />\r\n          <el-table-column prop=\"id\" label=\"审批单ID\" width=\"120\" />\r\n          <el-table-column prop=\"materialName\" label=\"材料名称\" width=\"120\" />\r\n          <el-table-column prop=\"quantity\" label=\"数量\" width=\"120\" />\r\n          <el-table-column prop=\"applyDate\" label=\"申请日期\" width=\"150\" />\r\n          <el-table-column prop=\"approver\" label=\"审批人\" width=\"120\" />\r\n          <el-table-column prop=\"description\" label=\"备注\" width=\"200\" />\r\n          <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"200\" />\r\n          <el-table-column prop=\"updateTime\" label=\"修改时间\" width=\"200\" />\r\n          <el-table-column prop=\"status\" label=\"审批状态\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <span>\r\n                <span v-if=\"scope.row.status === 0\">未审批</span>\r\n                <span v-if=\"scope.row.status === 1\">审批通过</span>\r\n                <span v-if=\"scope.row.status === -1\">审批失败</span>\r\n              </span>\r\n            </template>\r\n          </el-table-column>     \r\n          <el-table-column label=\"操作\" width=\"500\" fixed=\"right\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" @click=\"approve(scope.row)\" :disabled=\"scope.row.status !== 0\">同意</el-button>\r\n              <el-button type=\"danger\" @click=\"reject(scope.row)\" :disabled=\"scope.row.status !== 0\">驳回</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n  \r\n      <!-- 分页 -->\r\n      <el-pagination class=\"pagination\" layout=\"total, sizes, prev, pager, next\" :total=\"table.pageConfig.total\"\r\n                     :page-size=\"table.pageConfig.size\" :current-page.sync=\"table.pageConfig.current\"\r\n                     :page-sizes=\"[5, 10, 15, 20]\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { add, deleteBatch, deleteOne, edit, getList } from '@/api/materialApproval'\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        dialogForm: {\r\n          type: 'add', // add为新增，edit为编辑\r\n          isShow: false,\r\n          formData: {},\r\n          rules: {\r\n            approver: [{ required: true, message: '请输入审批人姓名', trigger: 'blur' }],\r\n            materialName: [{ required: true, message: '请输入材料名称', trigger: 'blur' }],\r\n            quantity: [{ required: true, message: '请输入材料数量', trigger: 'blur' }],\r\n            applyDate: [{ required: true, message: '请选择申请日期', trigger: 'blur' }]\r\n          }\r\n        },\r\n        searchForm: {\r\n          formData: {}\r\n        },\r\n        table: {\r\n          tableData: [],\r\n          pageConfig: {\r\n            total: 0,\r\n            current: 1,\r\n            size: 10\r\n          },\r\n          ids: []\r\n        },\r\n        loadingFlag: false // 控制加载显示\r\n      }\r\n    },\r\n    methods: {\r\n      // 同意审批\r\n      approve(row) {\r\n        row.status = 1; // 修改为已审批状态\r\n        edit(row).then(response => {\r\n          if (response.code === 200) {\r\n            this.$message.success('审批通过');\r\n            this.loading(); // 刷新数据\r\n          } else {\r\n            this.$message.error('审批失败');\r\n          }\r\n        });\r\n      },\r\n      // 驳回审批\r\n      reject(row) {\r\n        row.status = -1; // 修改为审批失败状态\r\n        edit(row).then(response => {\r\n          if (response.code === 200) {\r\n            this.$message.success('驳回成功');\r\n            this.loading(); // 刷新数据\r\n          } else {\r\n            this.$message.error('驳回失败');\r\n          }\r\n        });\r\n      },\r\n      // 刷新数据\r\n      loading() {\r\n        getList({\r\n          current: this.table.pageConfig.current,\r\n          size: this.table.pageConfig.size,\r\n          approver: this.searchForm.formData.approver,\r\n          applyDate: this.searchForm.formData.applyDate\r\n        }).then(response => {\r\n          this.table.tableData = response.data;\r\n          this.table.pageConfig.total = response.total;\r\n        });\r\n      },\r\n      // 打开新增材料审批的对话框\r\n      handleAdd() {\r\n        this.dialogForm.isShow = true;\r\n        this.dialogForm.type = 'add';\r\n        this.dialogForm.formData = {};\r\n      },\r\n      // 确认新增或编辑\r\n      confirm() {\r\n        this.$refs.dialogForm.validate(valid => {\r\n          if (valid) {\r\n            this.loadingFlag = true; // 开始加载\r\n            if (this.dialogForm.type === 'add') {\r\n              add(this.dialogForm.formData).then(response => {\r\n                this.loadingFlag = false; // 停止加载\r\n                if (response.code === 200) {\r\n                  this.$message.success('新增成功!');\r\n                  this.dialogForm.isShow = false;\r\n                  this.loading();\r\n                } else {\r\n                  this.$message.error('新增失败!');\r\n                }\r\n              });\r\n            } else {\r\n              edit(this.dialogForm.formData).then(response => {\r\n                this.loadingFlag = false; // 停止加载\r\n                if (response.code === 200) {\r\n                  this.$message.success('修改成功!');\r\n                  this.dialogForm.isShow = false;\r\n                  this.loading();\r\n                } else {\r\n                  this.$message.error('修改失败!');\r\n                }\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      handleSelectionChange(list) {\r\n        console.log('Selected rows:', list);\r\n        this.ids = list.map(item => item.id);  // 更新 ids 数组\r\n        console.log('Selected ids:', this.ids);   \r\n      },\r\n      handleDeleteBatch() {\r\n        deleteBatch(this.ids).then(response => {\r\n          if (response.code === 200) {\r\n            this.$message.success('批量删除成功！')\r\n            this.loading()\r\n          } else {\r\n            this.$message.error('批量删除失败！')\r\n          }\r\n        })\r\n      },\r\n      // 搜索\r\n      search() {\r\n        this.loading();\r\n      },\r\n      // 重置搜索表单\r\n      reset() {\r\n        this.searchForm.formData = {};\r\n        this.loading();\r\n      },\r\n      // 分页变化\r\n      handleSizeChange(size) {\r\n        this.table.pageConfig.size = size;\r\n        this.loading();\r\n      },\r\n      // 当前页变化\r\n      handleCurrentChange(current) {\r\n        this.table.pageConfig.current = current;\r\n        this.loading();\r\n      },\r\n    },\r\n    mounted() {\r\n      this.loading();\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .material-approval {\r\n    height: 90%;\r\n    padding-bottom: 20px;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .search-form .el-form-item {\r\n    margin-right: 20px;\r\n  }\r\n  \r\n  .common-table {\r\n    height: calc(100% - 62px);\r\n    background-color: white;\r\n    position: relative;\r\n  }\r\n  \r\n  .el-table {\r\n    border-radius: 8px;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .el-table-column .el-button {\r\n    margin-right: 10px;\r\n  }\r\n  \r\n  .pagination {\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n  </style>\r\n  ","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=13f4ae76&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=13f4ae76&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13f4ae76\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}