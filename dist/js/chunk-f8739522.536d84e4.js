(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8739522"],{"70f4":function(t,e,a){},a97b:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"manage"},[e("el-dialog",{attrs:{title:"考勤状态",visible:t.dialog.isShow},on:{"update:visible":function(e){return t.$set(t.dialog,"isShow",e)}}},[e("el-radio-group",{model:{value:t.dialog.status,callback:function(e){t.$set(t.dialog,"status",e)},expression:"dialog.status"}},t._l(t.dialog.statusList,(function(t,a){return e("el-radio",{key:a,attrs:{label:t.message,border:""}})})),1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialog.isShow=!1}}},[t._v(" 取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(" 确定")])],1)],1),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:t.importApi,headers:t.headers,accept:"xlsx","show-file-list":!1,"on-success":t.handleImportSuccess,multiple:!1}},[e("el-button",{attrs:{type:"success"}},[t._v(" 导入 ")])],1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:t.exportData}},[t._v(" 导出 ")]),e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v(" 搜索")]),e("el-button",{attrs:{type:"danger"},on:{click:t.reset}},[t._v(" 重置")])],1),e("div",{staticClass:"manage-header"},[e("el-form",{attrs:{"label-width":"auto",model:t.searchForm.formData,inline:!0}},[e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入姓名","prefix-icon":"el-icon-search"},model:{value:t.searchForm.formData.name,callback:function(e){t.$set(t.searchForm.formData,"name","string"===typeof e?e.trim():e)},expression:"searchForm.formData.name"}})],1),e("el-form-item",{attrs:{label:"部门",prop:"deptId"}},[e("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.searchForm.formData.deptId,callback:function(e){t.$set(t.searchForm.formData,"deptId",e)},expression:"searchForm.formData.deptId"}},t._l(t.searchForm.deptList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),1)],1),e("el-form-item",{attrs:{label:"月份",prop:"month"}},[e("el-date-picker",{attrs:{"value-format":"yyyyMM",type:"month",placeholder:"请选择月份"},model:{value:t.searchForm.formData.month,callback:function(e){t.$set(t.searchForm.formData,"month",e)},expression:"searchForm.formData.month"}})],1)],1)],1),e("div",{staticClass:"common-table"},[e("el-table",{attrs:{data:t.table.tableData,height:"85%",border:"",stripe:"","row-key":"id","header-cell-style":{background:"#eef1f6",color:"#606266",textAlign:"center",fontWeight:"bold",borderWidth:"3px"}}},[e("el-table-column",{attrs:{prop:"staffId",label:"员工id","min-width":"80",align:"center"}}),e("el-table-column",{attrs:{prop:"code",label:"工号","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"deptName",label:"部门","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"phone",label:"电话","min-width":"125",align:"center"}}),t._l(t.dayNum,(function(a){return e("el-table-column",{key:a,attrs:{label:a+"日","min-width":"55"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("div",{on:{click:function(e){return t.changeStatus(o.row,a-1)}}},[e("el-tag",{attrs:{type:o.row.attendanceList[a-1].tagType}},[t._v(" "+t._s(o.row.attendanceList[a-1].message)+" ")])],1)]}}],null,!0)})}))],2),e("el-pagination",{staticClass:"pager",attrs:{layout:"total,sizes,prev,pager,next,jumper","page-size":t.table.pageConfig.size?t.table.pageConfig.size:10,"page-sizes":[5,10,15,20],total:t.table.pageConfig.total,"current-page":t.table.pageConfig.current},on:{"update:currentPage":function(e){return t.$set(t.table.pageConfig,"current",e)},"update:current-page":function(e){return t.$set(t.table.pageConfig,"current",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},r=[],s=(a("14d9"),a("b775"));const n="/attendance",i=t=>Object(s["a"])({url:n,method:"get",params:t}),l=()=>Object(s["a"])({url:n+"/all"}),c=(t,e)=>Object(s["a"])({url:n+"/staff/"+t+"/"+e}),d=t=>Object(s["a"])({url:n+"/set",method:"put",data:t}),h=()=>"http://localhost:9271"+n+"/import",u=t=>"http://localhost:9271"+n+"/export/"+t;var m=a("2f62"),p=a("fe05"),g={name:"Performance",data(){return{dialog:{isShow:!1,data:{},status:"",statusList:[]},searchForm:{deptList:[],formData:{}},table:{tableData:[],pageConfig:{total:10,current:1,size:10}},dayNum:0,month:""}},computed:{...Object(m["b"])("token",["token"]),headers(){return{token:this.token}},importApi(){return h()}},methods:{confirm(){this.dialog.data.status=this.dialog.status,d(this.dialog.data).then(t=>{200===t.code?(this.loading(),this.$message.success("修改成功"),this.dialog.isShow=!1):this.$message.error("修改失败")})},changeStatus(t,e){l().then(t=>{200===t.code?this.dialog.statusList=t.data:this.$message.error("获取数据失败")}),c(t.staffId,t.attendanceList[e].attendanceDate).then(a=>{200===a.code?this.dialog.data=a.data:this.dialog.data={staffId:t.staffId,attendanceDate:t.attendanceList[e].attendanceDate}}),this.dialog.isShow=!0,this.dialog.status=t.attendanceList[e].message},handleSizeChange(t){this.table.pageConfig.size=t,this.loading()},handleCurrentChange(t){this.table.pageConfig.current=t,this.loading()},search(){this.loading()},reset(){this.searchForm.formData={},this.loading()},loading(){Object(p["e"])().then(t=>{const e=[];t.data.forEach(t=>{t.children.length>0&&(t.disabled=!0,e.push(t),t.children.forEach(t=>{e.push(t)}))}),this.searchForm.deptList=e}),i({current:this.table.pageConfig.current,size:this.table.pageConfig.size,name:this.searchForm.formData.name,deptId:this.searchForm.formData.deptId,month:this.searchForm.formData.month}).then(t=>{200===t.code?(this.table.tableData=t.data.list,console.log(this.table.tableData),this.table.pageConfig.total=t.data.total,this.dayNum=t.data.dayNum,this.month=t.data.month):this.$message.error(t.message)})},exportData(){window.open(u(this.month))},handleImportSuccess(t){200===t.code?(this.$message.success("数据导入成功！"),this.loading()):(this.$message.error("数据导入失败！"),setTimeout(()=>{this.$message.error(t.message)},50))}},created(){this.loading()}},f=g,b=(a("eba1"),a("2877")),y=Object(b["a"])(f,o,r,!1,null,"3e6f1a13",null);e["default"]=y.exports},eba1:function(t,e,a){"use strict";a("70f4")},fe05:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"h",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"g",(function(){return h})),a.d(e,"f",(function(){return u}));var o=a("b775");const r="/dept",s=t=>Object(o["a"])({url:r,method:"post",data:t}),n=t=>Object(o["a"])({url:r+"/"+t,method:"delete"}),i=t=>Object(o["a"])({url:r+"/batch/"+t,method:"delete"}),l=t=>Object(o["a"])({url:r,method:"put",data:t}),c=t=>Object(o["a"])({url:r,method:"get",params:t}),d=()=>Object(o["a"])({url:r+"/all"}),h=()=>"http://localhost:9271"+r+"/import",u=()=>"http://localhost:9271"+r+"/export"}}]);
//# sourceMappingURL=chunk-f8739522.536d84e4.js.map